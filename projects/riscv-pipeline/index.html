<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> RISC-V Pipeline Proccessor | Dongming Liu </title> <meta name="author" content="Dongming Liu"> <meta name="description" content="A Pipeline implementation of RV32I Processor with additional advanced features"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/hopeforcpp.svg?207793e93e2e5ba6285a7aa01e084550"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://meanpaper.github.io/projects/riscv-pipeline/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Dongming </span> Liu </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">RISC-V Pipeline Proccessor</h1> <p class="post-description">A Pipeline implementation of RV32I Processor with additional advanced features</p> </header> <article> <h1 id="a-pipelined-implementation-of-the-rv32i-processor">A Pipelined Implementation of the RV32I Processor</h1> <p>By the collaboration of <a href="https://github.com/MeanPaper" rel="external nofollow noopener" target="_blank">Dongming Liu</a>, <a href="https://github.com/Elijah-Ye" rel="external nofollow noopener" target="_blank">Elijah Ye</a>, <a href="https://github.com/tracymiao111" rel="external nofollow noopener" target="_blank">Tracy Miao</a><br> UIUC ECE411 FA23 | October 2023 ~ December 2023</p> <p>Click <a href="https://github.com/MeanPaper/Pipeline-RV32i-Processor" rel="external nofollow noopener" target="_blank">here</a> to get to my repository!</p> <h2 id="running-the-processor">Running the Processor</h2> <h3 id="to-customize-processor-cache">To customize processor cache</h3> <ol> <li>Go to <code class="language-plaintext highlighter-rouge">src/sram/config/</code> and change the values of <code class="language-plaintext highlighter-rouge">word_size</code> and <code class="language-plaintext highlighter-rouge">num_words</code> following files: <code class="language-plaintext highlighter-rouge">L2_data_array.py</code>, <code class="language-plaintext highlighter-rouge">L2_tag_array.py</code>, <code class="language-plaintext highlighter-rouge">mp3_data_array.py</code>, and <code class="language-plaintext highlighter-rouge">mp3_tag_array.py</code>. Note: Due to the limitataion of OpenRAM, the minimum value of <code class="language-plaintext highlighter-rouge">num_words</code> needs to be 16</li> <li>Run the following commands to generate SRAM <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>$ cd sram
$ make
</code></pre></div> </div> </li> <li>Change the <code class="language-plaintext highlighter-rouge">localparam</code> in <code class="language-plaintext highlighter-rouge">mp4.sv</code> under <code class="language-plaintext highlighter-rouge">src/hdl</code>. If you change the number of ways, you need to run to generate update logics. You can do this by running <code class="language-plaintext highlighter-rouge">plru_update_generate.py</code> under <code class="language-plaintext highlighter-rouge">src/</code> with the correct number of ways.</li> </ol> <h3 id="to-run-program-without-m-extension">To run program without M-Extension</h3> <p>Run the following commands under <code class="language-plaintext highlighter-rouge">src/</code></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make run_top_tb PROG=testcode/competition/coremark_rv32i.elf
$ make spike ELF=testcode/competition/coremark_rv32i.elf
$ diff -s sim/spike.log sim/golden_spike.log &gt; sim/diff.log
$ cd synth
$ make synth
</code></pre></div></div> <h3 id="to-run-program-with-m-extension">To run program with M-Extension</h3> <p>Run the following commands under <code class="language-plaintext highlighter-rouge">src/</code></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make run_top_tb PROG=testcode/competition/coremark_rv32im.elf
$ make spike ELF=testcode/competition/coremark_rv32im.elf
$ diff -s sim/spike.log sim/golden_spike.log &gt; sim/diff.log
$ cd synth
$ make synth
</code></pre></div></div> <h2 id="milestones">Milestones</h2> <p>More details can be found in my <a href="https://github.com/MeanPaper/Pipeline-RV32i-Processor" rel="external nofollow noopener" target="_blank">project repository</a></p> <ul> <li> <strong>CP0</strong> - Design Checkpoint</li> <li> <strong>CP1</strong> - RV32I ISA, Basic Pipelining</li> <li> <strong>CP2</strong> - Hazard Control, L1 Cache, Forwarding, Static Branch Prediction</li> <li> <strong>CP3</strong> - Advanced Design Options <ul> <li>Fully parameterized cache</li> <li>Multilevel cache (L1 and L2)</li> <li>RV32I M extension (fast multiplication and division support)</li> <li>Eviction Buffer</li> <li>Next line prefetcher</li> </ul> </li> <li> <strong>CP4</strong> - Design Competition (ranked by PD<sup>2</sup> and PD<sup>3</sup>) <ul> <li>Won the third place in the competition</li> </ul> </li> </ul> <h2 id="academic-integrity">Academic Integrity</h2> <p>Please review the University of Illinois Student Code, particularly all subsections of <a href="https://studentcode.illinois.edu/article1/part4/1-401/" rel="external nofollow noopener" target="_blank">Article 1, Part 4 - Academic Integrity Policy and Procedure</a>.</p> <h2 id="legal-notice">Legal Notice</h2> <p>This work is protected under the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html" rel="external nofollow noopener" target="_blank">GNU General Public License v3.0</a>.<br> <strong>Copyright (c) 2023 Elijah Gaohan Ye, Dongming Liu, Tracy Miao, Jian Huang</strong></p> <p>The software programs described in the documents are confidential and proprietary products of Synopsys Corp. or its licensors. The terms and conditions governing the sale and licensing of Synopsys products are set forth in written agreements between Synopsys Corp. and its customers. No representation or other affirmation of fact contained in this publication shall be deemed to be a warranty or give rise to any liability of Synopsys Corp. whatsoever. Images of software programs in use are assumed to be copyright and may not be reproduced.</p> <p>The documents are for informational and instructional purposes only. The ECE 411 teaching staff reserves the right to make changes in specifications and other information contained in this publication without prior notice, and the reader should, in all cases, consult the teaching staff to determine whether any changes have been made.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Dongming Liu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>